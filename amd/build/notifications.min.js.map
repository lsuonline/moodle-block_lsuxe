{"version":3,"sources":["../src/notifications.js"],"names":["define","$","notification","MF","ME","callYesNoModi","data","this_data","promiseObj","Promise","resolve","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","save_button","root","getRoot","on","save","show","callNoti","hasOwnProperty","console","log","addNotification","callAlert","storeMsg","sessionStorage","setItem","success","msg","showMsg","getItem","message","removeItem"],"mappings":"AAwBCA,OAAM,6BAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,oBAAhC,CAAsD,mBAAtD,CAAD,CACH,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAA8BC,CAA9B,CAAkC,CAClC,aAEA,MAAO,CAQHC,aAAa,CAAE,uBAASC,CAAT,CAAe,IACtBC,CAAAA,CAAS,CAAGD,CADU,CAEtBE,CAAU,CAAG,GAAIC,CAAAA,OAAJ,CAAY,SAAUC,CAAV,CAAmB,CAE5CP,CAAE,CAACQ,MAAH,CAAU,CACNC,IAAI,CAAET,CAAE,CAACU,KAAH,CAASC,WADT,CAENC,KAAK,CAAER,CAAS,CAACQ,KAFX,CAGNC,IAAI,CAAET,CAAS,CAACS,IAHV,CAAV,EAKCC,IALD,CAKM,SAASC,CAAT,CAAgB,CAClBA,CAAK,CAACC,iBAAN,CAAwBZ,CAAS,CAACa,WAAlC,EACA,GAAIC,CAAAA,CAAI,CAAGH,CAAK,CAACI,OAAN,EAAX,CACAD,CAAI,CAACE,EAAL,CAAQnB,CAAE,CAACoB,IAAX,CAAiB,UAAW,CACxBd,CAAO,CAAC,CAAC,SAAD,CAAiB,KAAQH,CAAzB,CAAD,CACV,CAFD,EAGAW,CAAK,CAACO,IAAN,EACH,CAZD,CAaH,CAfgB,CAFS,CAkB1B,MAAOjB,CAAAA,CACV,CA3BE,CAwCHkB,QAAQ,CAAE,kBAASpB,CAAT,CAAe,CACrB,GAAI,CAACA,CAAI,CAACqB,cAAL,CAAoB,SAApB,CAAL,CAAqC,CACjCC,OAAO,CAACC,GAAR,CAAY,iEAAZ,CACH,CACD,GAAI,CAACvB,CAAI,CAACqB,cAAL,CAAoB,MAApB,CAAL,CAAkC,CAE9BrB,CAAI,CAACM,IAAL,CAAY,MACf,CACDV,CAAY,CAAC4B,eAAb,CAA6BxB,CAA7B,CACH,CAjDE,CA8DHyB,SAAS,CAAE,mBAASzB,CAAT,CAAe,CACtB,GAAI,CAACA,CAAI,CAACqB,cAAL,CAAoB,OAApB,CAAL,CAAmC,CAC/BC,OAAO,CAACC,GAAR,CAAY,6DAAZ,CACH,CAED3B,CAAY,CAAC4B,eAAb,CAA6BxB,CAA7B,CACH,CApEE,CA4EH0B,QAAQ,CAAE,kBAAS1B,CAAT,CAAe,CAErB2B,cAAc,CAACC,OAAf,CAAuB,qBAAvB,CAA8C5B,CAAI,CAAC6B,OAAnD,EACAF,cAAc,CAACC,OAAf,CAAuB,iBAAvB,CAA0C5B,CAAI,CAAC8B,GAA/C,CACH,CAhFE,CAuFHC,OAAO,CAAE,kBAAW,CAEhB,GAAIJ,cAAc,CAACK,OAAf,CAAuB,iBAAvB,CAAJ,CAA+C,CAC3C,KAAKZ,QAAL,CAAc,CACVa,OAAO,CAAEN,cAAc,CAACK,OAAf,CAAuB,iBAAvB,CADC,CAEV1B,IAAI,CAAEqB,cAAc,CAACK,OAAf,CAAuB,qBAAvB,CAFI,CAAd,EAKAL,cAAc,CAACO,UAAf,CAA0B,iBAA1B,EACAP,cAAc,CAACO,UAAf,CAA0B,qBAA1B,CACH,CACJ,CAlGE,CAoGV,CAxGM,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Cross Enrollment Tool\n *\n * @package   block_lsuxe\n * @copyright 2008 onwards Louisiana State University\n * @copyright 2008 onwards David Lowe, Robert Russo\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'core/notification', 'core/modal_factory', 'core/modal_events'],\n    function($, notification, MF, ME) {\n    'use strict';\n\n    return {\n\n        /**\n         * Confirmation window to SAVE or CANCEL\n         * Type can be either: success, warning, info, error\n         * @param {obj} A simple object with the 'message' and 'type' of notification.\n         * @return void\n         */\n        callYesNoModi: function(data) {\n            var this_data = data;\n            var promiseObj = new Promise(function (resolve) {\n\n                MF.create({\n                    type: MF.types.SAVE_CANCEL,\n                    title: this_data.title,\n                    body: this_data.body\n                })\n                .then(function(modal) {\n                    modal.setSaveButtonText(this_data.save_button);\n                    var root = modal.getRoot();\n                    root.on(ME.save, function() {\n                        resolve({\"status\": true, \"data\": this_data});\n                    });\n                    modal.show();\n                });\n            });\n            return promiseObj;\n        },\n\n        /**\n         * A simple way to call the Moodle core notification system.\n         * Type can be either: success, warning, info, error\n         *  Example:\n         *  noti.callNoti({\n         *      message: \"This is a success test\",\n         *      type: \"success\"\n         *  });\n         * @param {obj} A simple object with the 'message' and 'type' of notification.\n         * @return void\n         */\n        callNoti: function(data) {\n            if (!data.hasOwnProperty('message')) {\n                console.log(\"ERROR -> Notification was called but with no message, aborting.\");\n            }\n            if (!data.hasOwnProperty('type')) {\n                // default to info\n                data.type = \"info\";\n            }\n            notification.addNotification(data);\n        },\n\n        /**\n         * An alert using the Moodle core notification system.\n         * Type can be either: success, warning, info, error\n         *  Example:\n         *  noti.callNoti({\n         *      title: \"Hello\",\n         *      message: \"This is an alert\",\n         *  });\n         * @param {obj} A simple object with the 'message' and 'type' of notification.\n         * @return void\n         */\n        callAlert: function(data) {\n            if (!data.hasOwnProperty('title')) {\n                console.log(\"ERROR -> An alert was called but with no message, aborting.\");\n            }\n\n            notification.addNotification(data);\n        },\n\n        /**\n         * Store the reponse object to showcase a message after page reload.\n         * @param {obj} Server Response {'success', 'data', 'msg'}\n         *\n         * @return void\n         */\n        storeMsg: function(data) {\n            // Save data to sessionStorage\n            sessionStorage.setItem('sent_delete_success', data.success);\n            sessionStorage.setItem('sent_delete_msg', data.msg);\n        },\n\n        /**\n         *  If a message is stored then show the notification and remove it.\n         * @param void\n         * @return void\n         */\n        showMsg: function() {\n            // Save data to sessionStorage\n            if (sessionStorage.getItem('sent_delete_msg')) {\n                this.callNoti({\n                    message: sessionStorage.getItem('sent_delete_msg'),\n                    type: sessionStorage.getItem('sent_delete_success')\n                });\n                // Remove saved data from sessionStorage\n                sessionStorage.removeItem('sent_delete_msg');\n                sessionStorage.removeItem('sent_delete_success');\n            }\n        }\n    };\n});"],"file":"notifications.min.js"}