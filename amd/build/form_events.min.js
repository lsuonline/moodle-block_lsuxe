define ("block_lsuxe/form_events",["jquery","block_lsuxe/xe_lib"],function(a,b){'use strict';return{getTokenReady:function getTokenReady(){var c=a("#id_available_moodle_instances option:selected").text();b.getTokenForURL(c).then(function(a){if(!0==a.success){sessionStorage.setItem("currentToken",a.data);sessionStorage.setItem("currentUrl",c)}})},getGroupData:function getGroupData(a){return b.jaxyPromise({call:"getGroupData",params:a,class:"router"})},setHiddenValue:function setHiddenValue(b,c){a("input[name="+b+"]").val(c)},registerMappingEvents:function registerMappingEvents(){var b=this,c=a("#id_srccourseshortname");c.change(function(){if(c.val()){b.getGroupData({courseid:c.val(),coursename:a("#id_srccourseshortname option:selected").text()}).then(function(c){if(1==c.count){a("#id_srccoursegroupnameselect").val(c.data.groupname);a("#id_srccoursegroupname").val(c.data.groupname)}else if(1<c.count){a("#id_srccoursegroupnameselect").empty();var d="";for(var e in c.data){if(""==d){d={groupid:c.data[e].groupid,groupname:c.data[e].groupname}}a("#id_srccoursegroupnameselect").append(a("<option></option>").attr("value",c.data[e].groupid).text(c.data[e].groupname))}b.setHiddenValue("srccoursegroupname",d.groupname);b.setHiddenValue("srccoursegroupid",d.groupid)}})}else{a("#id_srccoursegroupnameselect").empty();a("#id_srccoursegroupnametext").text();a("#id_srccoursegroupnameselect").append(a("<option></option>").attr("value",0).text("Please search for a course first"))}});a("#id_srccoursegroupnameselect").change(function(){var c=a(this).find("option:selected").attr("value"),d=a(this).find("option:selected").text();b.setHiddenValue("srccoursegroupname",d);b.setHiddenValue("srccoursegroupid",c)});a("select#id_available_moodle_instances").on("change",function(){b.getTokenReady()})},registerEvents:function registerEvents(){if("mappings"==sessionStorage.getItem("xe_form")&&"true"==sessionStorage.getItem("xe_viewform")){this.registerMappingEvents()}else if("moodles"==sessionStorage.getItem("xe_form")&&"true"==sessionStorage.getItem("xe_viewform")){console.log("Need to complete this at some point rather than loading from template")}},init:function init(){this.registerEvents();this.getTokenReady()}}});
//# sourceMappingURL=form_events.min.js.map
